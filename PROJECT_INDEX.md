# API Gateway Worker - é¡¹ç›®æ–‡æ¡£ç´¢å¼•

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**API Hub** æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ API ä»£ç†æœåŠ¡é›†åˆï¼Œé€šè¿‡ Cloudflare Workers æˆ–æœ¬åœ°æœåŠ¡å™¨éƒ¨ç½²ï¼Œä¸ºå¤šä¸ª AI å’Œ Web æœåŠ¡æä¾›ç»Ÿä¸€è®¿é—®å…¥å£ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | æ–‡ä»¶ | ç”¨é€” |
|-----|------|------|
| **Worker è¿è¡Œæ—¶** | `src/worker.js` | ä½¿ç”¨ fetch API çš„ Cloudflare Workers éƒ¨ç½² |
| **æœåŠ¡å™¨è¿è¡Œæ—¶** | `src/server.js` | ç”¨äºæœ¬åœ°éƒ¨ç½²çš„ Node.js HTTP æœåŠ¡å™¨ |
| **é…ç½®æ–‡ä»¶** | `wrangler.toml` | Cloudflare Workers é…ç½® |
| **åŒ…é…ç½®** | `package.json` | Node.js ä¾èµ–å’Œè„šæœ¬ |

## ğŸŒ æ”¯æŒçš„æœåŠ¡

### AI API ä»£ç†
- **OpenAI** (`/openai/*`) â†’ `api.openai.com` ğŸ¤–
- **Google Gemini** (`/gemini/*`) â†’ `generativelanguage.googleapis.com` ğŸŒŸ  
- **Claude** (`/claude/*`) â†’ `api.anthropic.com` ğŸ§ 
- **Claude Web** (`/claude2api/*`) â†’ `claude.ai` ğŸ¯
- **Grok** (`/grok/*`) â†’ `api.x.ai` âš¡

### å…¶ä»–æœåŠ¡
- **Docker Registry** (`/docker/*`) â†’ `docker.ixu.cc` ğŸ³
- **GitHub API** (`/github/*`) â†’ `github.com` ğŸ“¦
- **Telegram Bot** (`/telegram/*`) â†’ `api.telegram.org` ğŸ“±

## ğŸ“ é¡¹ç›®ç»“æ„

```
api_gateway_worker/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ worker.js      # Cloudflare Workers è¿è¡Œæ—¶
â”‚   â””â”€â”€ server.js      # Node.js HTTP æœåŠ¡å™¨
â”œâ”€â”€ package.json       # ä¾èµ–å’Œè„šæœ¬
â”œâ”€â”€ wrangler.toml      # CF Workers é…ç½®
â””â”€â”€ README.md          # ä¸­æ–‡æ–‡æ¡£
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### è¯·æ±‚æµç¨‹
1. **è·¯ç”±æ£€æµ‹** â†’ è§£æä¼ å…¥è¯·æ±‚è·¯å¾„
2. **æœåŠ¡æ˜ å°„** â†’ åŒ¹é…åˆ°é…ç½®çš„ API æœåŠ¡
3. **è¯·æ±‚å¤´å¤„ç†** â†’ è½¬å‘ç›¸å…³è¯·æ±‚å¤´
4. **ä»£ç†è¯·æ±‚** â†’ è½¬å‘åˆ°ç›®æ ‡ API
5. **å“åº”å¤„ç†** â†’ è¿”å›ä»£ç†å“åº”

### æŠ€æœ¯èƒ½åŠ›
- âœ… **CORS æ”¯æŒ** - è·¨åŸŸè¯·æ±‚å¤„ç†
- âœ… **è¯·æ±‚å¤´è½¬å‘** - ç»´æŠ¤ API è®¤è¯
- âœ… **å¤šè¿è¡Œæ—¶** - Workers å’Œ Node.js æ”¯æŒ
- âœ… **Web ç•Œé¢** - ä¼˜é›…çš„æœåŠ¡ä»ªè¡¨æ¿
- âœ… **é”™è¯¯å¤„ç†** - ä¼˜é›…çš„æ•…éšœç®¡ç†

## ğŸ“‹ API é…ç½®æ¨¡å¼

```javascript
const API_CONFIGS = {
  "service_name": {
    host: "api.example.com",           // ç›®æ ‡ä¸»æœºå
    paths: ["/v1/"],                   // å…è®¸çš„è·¯å¾„å‰ç¼€
    description: "æœåŠ¡æè¿°",             // UI æ˜¾ç¤ºæ–‡æœ¬
    logo: "ğŸ”¥",                        // æœåŠ¡è¡¨æƒ…ç¬¦å·
    directUrl: false                   // å¯é€‰ï¼šç›´æ¥ URL æ¨¡å¼
  }
}
```

## ğŸš€ éƒ¨ç½²é€‰é¡¹

### 1. Cloudflare Workers (æ¨è)
```bash
npm run deploy
```

### 2. æœ¬åœ°å¼€å‘
```bash
npm run dev
```

### 3. Node.js æœåŠ¡å™¨
```bash
node src/server.js
```

## ğŸ” ä»£ç åˆ†æ

### Worker.js ç‰¹æ€§
- **äº‹ä»¶é©±åŠ¨æ¶æ„** ä½¿ç”¨ `addEventListener('fetch')`
- **ç°ä»£ fetch API** ç”¨äº HTTP ä»£ç†
- **åµŒå…¥å¼ HTML æ¨¡æ¿** ç”¨äº Web ç•Œé¢
- **é”™è¯¯è¾¹ç•Œå¤„ç†** ä½¿ç”¨ try-catch å—

### Server.js ç‰¹æ€§  
- **Node.js HTTP/HTTPS æ¨¡å—** ç”¨äºä»£ç†
- **åŸºäºæµçš„è¯·æ±‚è½¬å‘** ä½¿ç”¨ `pipe()`
- **CORS é¢„æ£€å¤„ç†** ä½¿ç”¨ OPTIONS æ–¹æ³•
- **è¿›ç¨‹ç¯å¢ƒé…ç½®** é€šè¿‡ PORT

### å…±äº«æ¶æ„
- **ç›¸åŒçš„ API_CONFIGS** è·¨ä¸¤ä¸ªè¿è¡Œæ—¶
- **ç›¸åŒçš„ HTML_TEMPLATE** ä¿æŒ UI ä¸€è‡´æ€§
- **ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¨¡å¼**
- **é€šç”¨çš„è¯·æ±‚è·¯ç”±é€»è¾‘**

## ğŸ›¡ï¸ å®‰å…¨è€ƒè™‘

### å½“å‰å®ç°
- âœ… å·²é…ç½® CORS è¯·æ±‚å¤´
- âœ… è¯·æ±‚å¤´æ¸…ç†ï¼ˆç§»é™¤ host, connectionï¼‰
- âœ… é’ˆå¯¹å…è®¸æœåŠ¡çš„è·¯å¾„éªŒè¯
- âš ï¸ **æ— éœ€è®¤è¯**ï¼ˆå¼€æ”¾ä»£ç†ï¼‰
- âš ï¸ **æœªå®ç°é€Ÿç‡é™åˆ¶**
- âš ï¸ **æ— è¯·æ±‚æ—¥å¿—**ç”¨äºç›‘æ§

### å»ºè®®
- å®ç° API å¯†é’¥è®¤è¯
- ä¸ºæ¯ä¸ªæœåŠ¡æ·»åŠ é€Ÿç‡é™åˆ¶
- å¯ç”¨è¯·æ±‚/å“åº”æ—¥å¿—è®°å½•
- è€ƒè™‘åŸºäº IP çš„è®¿é—®æ§åˆ¶

## ğŸ“Š æ–‡ä»¶ç»Ÿè®¡

| æ–‡ä»¶ | è¡Œæ•° | ç±»å‹ | åŠŸèƒ½ |
|-----|------|------|------|
| `src/worker.js` | 419 | JavaScript | CF Workers è¿è¡Œæ—¶ |
| `src/server.js` | 506 | JavaScript | Node.js æœåŠ¡å™¨ |
| `README.md` | 120 | Markdown | ä¸­æ–‡æ–‡æ¡£ |
| `wrangler.toml` | 8 | TOML | CF é…ç½® |
| `package.json` | 12 | JSON | Node.js é…ç½® |

## ğŸ”— å¤–éƒ¨ä¾èµ–

### è¿è¡Œæ—¶ä¾èµ–
- **æ— ** - çº¯ JavaScript å®ç°

### å¼€å‘ä¾èµ–
- `wrangler` ^3.0.0 - Cloudflare Workers CLI

## ğŸŒ æ¼”ç¤ºå’Œèµ„æº

- **æ¼”ç¤ºç«™ç‚¹**: https://api.ixu.cc
- **GitHub ä»“åº“**: https://github.com/Ten-o/api_gateway_worker
- **éƒ¨ç½²æŒ‰é’®**: ä¸€é”® Cloudflare Workers éƒ¨ç½²

## ğŸ“ˆ æ€§èƒ½ç‰¹å¾

### Cloudflare Workers
- **å†·å¯åŠ¨**: å…¨çƒ ~10-50ms
- **å†…å­˜**: æœ€å°å ç”¨
- **å¹¶å‘**: é«˜åº¦å¯æ‰©å±•
- **åœ°ç†åˆ†å¸ƒ**: è¾¹ç¼˜åˆ†å‘

### Node.js æœåŠ¡å™¨
- **å¯åŠ¨**: æœ¬åœ° ~100-500ms
- **å†…å­˜**: Node.js å¼€é”€
- **å¹¶å‘**: åŸºäºäº‹ä»¶å¾ªç¯
- **åœ°ç†åˆ†å¸ƒ**: å•ä¸€ä½ç½®

---

*æœ€åæ›´æ–°: 2025-07-25*  
*ç”± Claude Code SuperClaude Framework ç”Ÿæˆ*